{% extends "base.html" %}

{% block content %}
    <div class="bg-base-100 rounded-lg shadow-lg p-6">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">收入支出结余对比</h2>
        
        {% if years and years|length > 0 %}
            <div class="chart-container mb-8">
                <img 
                    src="{{ chart_url }}" 
                    alt="收入支出结余对比图表"
                    class="rounded-lg shadow-xl"
                >
            </div>
            
            <h3 class="text-xl font-semibold mb-4">详细数据</h3>
            <div class="overflow-x-auto">
                <table class="table table-zebra w-full max-w-3xl mx-auto">
                    <thead>
                        <tr>
                            <th>年份</th>
                            <th>收入(元)</th>
                            <th>支出(元)</th>
                            <th>结余(元)</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for i in range(years|length) %}
                            <tr class="hover">
                                <td>{{ years[i] }}</td>
                                <td class="text-success">{{ incomes[i] | round(2) }}</td>
                                <td class="text-error">{{ expenses[i] | round(2) }}</td>
                                <td class="text-primary">{{ surpluses[i] | round(2) }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="card bg-base-200 rounded-lg shadow-lg p-8 text-center">
                <h3 class="text-xl font-semibold mb-2 text-gray-600">暂无数据</h3>
                <p class="text-gray-500">请先导入数据</p>
                <div class="mt-4">
                    <a href="{{ url_for('main.import_data') }}" class="btn btn-primary">导入数据</a>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}
